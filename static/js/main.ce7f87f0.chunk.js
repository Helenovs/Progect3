(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{129:function(e,t,a){},130:function(e,t,a){},131:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(64),o=a.n(r);a(72),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=a(3),l=a(4),c=a(6),u=a(5),m=a(7),d=a(134),p=a(133),h=a(132),b=a(135),g="/Progect3",f="/chatroom",v=(a(73),s.a.createContext(null)),E=function(e){return function(t){return s.a.createElement(v.Consumer,null,function(a){return s.a.createElement(e,Object.assign({},t,{firebase:a}))})}},O=v,j=a(37),w=a.n(j),y=(a(120),a(122),{apiKey:"AIzaSyBFLsBsYruDOWH003E0jvghqw4e_PocED8",authDomain:"messengerdb-777eb.firebaseapp.com",databaseURL:"https://messengerdb-777eb.firebaseio.com",projectId:"messengerdb-777eb",storageBucket:"messengerdb-777eb.appspot.com",messagingSenderId:"875521669810"}),C=function e(){var t=this;Object(i.a)(this,e),this.doCreateUserWithEmailAndPassword=function(e,a){return t.auth.createUserWithEmailAndPassword(e,a)},this.doSignInWithEmailAndPassword=function(e,a){return t.auth.signInWithEmailAndPassword(e,a)},this.doSignOut=function(){return t.auth.signOut()},this.doPasswordReset=function(e){return t.auth.sendPasswordResetEmail(e)},this.doPasswordUpdate=function(e){return t.auth.currentUser.updatePassword(e)},this.user=function(e){return t.db.ref("users/".concat(e))},this.users=function(){return t.db.ref("users")},this.message=function(e){return t.db.ref("messages/".concat(e))},this.messages=function(){return t.db.ref("messages")},w.a.initializeApp(y),this.auth=w.a.auth(),this.db=w.a.database()},S=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).signOut=function(){a.props.firebase.doSignOut().then(function(){a.props.history.push(g)})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement("button",{type:"button",className:"btn btn-outline-warning",onClick:this.signOut},"Sign Out")}}]),t}(n.Component),N=Object(b.a)(E(S)),k=function(e){return s.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-primary"},s.a.createElement("div",{className:"collapse navbar-collapse"},s.a.createElement("img",{src:"chat.png",className:"navimg"}),s.a.createElement("ul",{className:"navbar-nav mr-auto"},s.a.createElement("li",{className:"nav-item active"},s.a.createElement(h.a,{to:f,className:"nav-link"},"ChatRoom")),s.a.createElement("li",{className:"nav-item active"},s.a.createElement(h.a,{to:"/users",className:"nav-link"},"Users")),s.a.createElement("li",{className:"nav-item active"},s.a.createElement(N,{history:e.history})))))},x=function(){return s.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-primary"},s.a.createElement("div",{className:"collapse navbar-collapse"},s.a.createElement("img",{src:"chat.png",className:"navimg"}),s.a.createElement("ul",{className:"navbar-nav mr-auto"},s.a.createElement("li",{className:"nav-item active"},s.a.createElement(h.a,{to:g,className:"nav-link"},"Landing")),s.a.createElement("li",{className:"nav-item active"},s.a.createElement(h.a,{to:"/signin",className:"nav-link"},"Sign In")))))},M=function(e){var t=e.authUser;return s.a.createElement("div",null,t?s.a.createElement(k,null):s.a.createElement(x,null))},U=function(){return s.a.createElement("div",{class:"container jumbotron"},s.a.createElement("h1",null,"Welcome to our ChatRoom"),s.a.createElement("p",null,"Chat is designed for real-time, unstructured conversations with users who are signed on to the site at the same time.  By default, Chat messages are saved and are visible to all users so that all site participants can benefit from clarifying conversations and questions and answers."))},T=a(23),A=a(10),P={username:"",email:"",passwordOne:"",passwordTwo:"",error:null},I=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onSubmit=function(e){var t=a.state,n=t.username,s=t.email,r=t.passwordOne;a.props.firebase.doCreateUserWithEmailAndPassword(s,r).then(function(e){return a.props.firebase.user(e.user.uid).set({username:n,email:s})}).then(function(){a.setState(Object(A.a)({},P)),a.props.history.push(f)}).catch(function(e){a.setState({error:e})}),e.preventDefault()},a.onChange=function(e){a.setState(Object(T.a)({},e.target.name,e.target.value)),console.log(a.setState())},a.state=Object(A.a)({},P),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.email,n=e.passwordOne,r=e.passwordTwo,o=e.error,i=n!==r||""===n||""===a||""===t;return s.a.createElement("form",{onSubmit:this.onSubmit},s.a.createElement("input",{name:"username",value:t,onChange:this.onChange,type:"text",placeholder:"Full Name"}),s.a.createElement("input",{name:"email",value:a,onChange:this.onChange,type:"text",placeholder:"Email Address"}),s.a.createElement("input",{name:"passwordOne",value:n,onChange:this.onChange,type:"password",placeholder:"Password"}),s.a.createElement("input",{name:"passwordTwo",value:r,onChange:this.onChange,type:"password",placeholder:"Confirm Password"}),s.a.createElement("button",{disabled:i,type:"submit"},"Sign Up"),o&&s.a.createElement("p",null,o.message))}}]),t}(n.Component),D=function(){return s.a.createElement("p",null,"Don't have an account? ",s.a.createElement(h.a,{to:"/signup",className:"btn btn-secondary"},"Sign Up"))},R=Object(b.a)(E(I)),W=function(){return s.a.createElement("div",null,s.a.createElement("h1",null,"SignUp"),s.a.createElement(R,null))},L=(a(129),{email:"",password:"",error:null}),B=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onSubmit=function(e){var t=a.state,n=t.email,s=t.password;a.props.firebase.doSignInWithEmailAndPassword(n,s).then(function(){a.setState(Object(A.a)({},L)),a.props.history.push(f)}).catch(function(e){a.setState({error:e})}),e.preventDefault()},a.onChange=function(e){a.setState(Object(T.a)({},e.target.name,e.target.value))},a.state=Object(A.a)({},L),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.error,r=""===a||""===t;return s.a.createElement("div",{className:"sign-form"},s.a.createElement("form",{onSubmit:this.onSubmit},s.a.createElement("div",{className:"form-group"},s.a.createElement("input",{className:"form-control",name:"email",value:t,onChange:this.onChange,type:"text",placeholder:"Email Address"})),s.a.createElement("div",{className:"form-group"},s.a.createElement("input",{className:"form-control",name:"password",value:a,onChange:this.onChange,type:"password",placeholder:"Password"})),s.a.createElement("button",{disabled:r,type:"submit",className:"btn btn-secondary"},"Sign In"),n&&s.a.createElement("p",null,n.message)))}}]),t}(n.Component),F=Object(b.a)(E(B)),q=function(){return s.a.createElement("div",{className:"sign-form"},s.a.createElement("h1",null,"SignIn"),s.a.createElement(F,null),s.a.createElement(D,null))},z=function(){return s.a.createElement("div",null,s.a.createElement("h1",null,"PasswordForget"))},H=s.a.createContext(null),J=(a(130),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onToggleEditMode=function(){a.setState(function(e){return{editMode:!e.editMode,editText:a.props.message.text}})},a.onChangeEditText=function(e){a.setState({editText:e.target.value})},a.onSaveEditText=function(){a.props.onEditMessage(a.props.message,a.state.editText),a.setState({editMode:!1})},a.state={editMode:!1,editText:a.props.message.text},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.message,a=e.onRemoveMessage,n=this.state,r=n.editMode,o=n.editText;return s.a.createElement("div",{className:"modal-dialog"},s.a.createElement("div",{className:"modal-content"},s.a.createElement("li",{className:"sign_del"},r?s.a.createElement("input",{className:"input-header",type:"text",value:o,onChange:this.onChangeEditText}):s.a.createElement("span",null,s.a.createElement("div",{className:"modal-header"},t.user.username||t.user.userId)," ",s.a.createElement("div",{className:"modal-header"},t.text," ",t.editedAt&&s.a.createElement("span",null,"(Edited)"))),s.a.createElement("div",{className:"modal-footer"},r?s.a.createElement("span",null,s.a.createElement("button",{onClick:this.onSaveEditText,className:"btn btn-warning"},"Save"),s.a.createElement("button",{onClick:this.onToggleEditMode,className:"btn btn-warning"},"Reset")):s.a.createElement("button",{onClick:this.onToggleEditMode,className:"btn btn-warning"},"Edit"),!r&&s.a.createElement("button",{type:"button",onClick:function(){return a(t.uid)},className:"btn btn-warning"},"Delete")))))}}]),t}(n.Component)),_=function(e){var t=e.messages,a=e.onEditMessage,n=e.onRemoveMessage;return s.a.createElement("ul",null,t.map(function(e){return s.a.createElement(J,{key:e.uid,message:e,onEditMessage:a,onRemoveMessage:n})}))},K=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onListenForMessages=function(){a.setState({loading:!0}),a.props.firebase.messages().orderByChild("createdAt").limitToLast(a.state.limit).on("value",function(e){var t=e.val();if(t){var n=Object.keys(t).map(function(e){return Object(A.a)({},t[e],{uid:e})});a.setState({messages:n,loading:!1})}else a.setState({messages:null,loading:!1})})},a.onChangeText=function(e){a.setState({text:e.target.value})},a.onCreateMessage=function(e,t){a.props.firebase.messages().push({text:a.state.text,userId:a.props.firebase.auth.getUid(),createdAt:new Date}),a.setState({text:""}),e.preventDefault()},a.onEditMessage=function(e,t){a.props.firebase.message(e.uid).set(Object(A.a)({},e,{text:t,editedAt:new Date}))},a.onRemoveMessage=function(e){a.props.firebase.message(e).remove()},a.onNextPage=function(){a.setState(function(e){return{limit:e.limit+5}},a.onListenForMessages)},a.state={text:"",loading:!1,messages:[],limit:5},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.onListenForMessages()}},{key:"componentWillUnmount",value:function(){this.props.firebase.messages().off()}},{key:"render",value:function(){var e=this,t=this.props.users,a=this.state,n=a.text,r=a.messages,o=a.loading;return s.a.createElement(H.Consumer,null,function(a){return s.a.createElement("div",null,!o&&r&&s.a.createElement("button",{type:"button",onClick:e.onNextPage,className:"btn btn-primary btndop"},"More"),o&&s.a.createElement("div",null,"Loading ..."),r&&s.a.createElement(_,{messages:r.map(function(e){return Object(A.a)({},e,{user:t?t[e.userId]:{userId:e.userId}})}),onEditMessage:e.onEditMessage.bind(e),onRemoveMessage:e.onRemoveMessage.bind(e)}),!r&&s.a.createElement("div",null,"There are no messages ..."),s.a.createElement("form",{onSubmit:function(t){return e.onCreateMessage(t,a)}},s.a.createElement("input",{type:"text",value:n,onChange:e.onChangeText,className:"form-control form-control-lg"}),s.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Send Message")))})}}]),t}(n.Component),Y=E(K),$=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={users:null},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.firebase.users().on("value",function(t){e.setState({users:t.val()})})}},{key:"componentWillUnmount",value:function(){this.props.firebase.users().off()}},{key:"render",value:function(){return s.a.createElement("div",{className:"container"},s.a.createElement("h1",null,"CHATROOM"),s.a.createElement("p",{className:"alert alert-dismissible alert-info"},"The ChatRoom is accessible by every signed in user."),s.a.createElement(Y,{users:this.state.users}))}}]),t}(n.Component),G=E($),Q=function(){return s.a.createElement("div",null,s.a.createElement("h1",null,"Account"))},V=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={loading:!1,users:[]},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),this.props.firebase.users().on("value",function(t){var a=t.val(),n=Object.keys(a).map(function(e){return Object(A.a)({},a[e],{uid:e})});e.setState({users:n,loading:!1})})}},{key:"componentWillUnmount",value:function(){this.props.firebase.users().off()}},{key:"render",value:function(){var e=this.state,t=e.users,a=e.loading;return s.a.createElement("div",null,s.a.createElement("h1",null,"List of all Signed in Users"),a&&s.a.createElement("div",null,"Loading ..."),s.a.createElement(X,{users:t}))}}]),t}(n.Component),X=function(e){var t=e.users;return s.a.createElement("ul",null,t.map(function(e){return s.a.createElement("li",{key:e.uid},s.a.createElement("span",null,s.a.createElement("strong",null,"Username:")," ",e.username))}))},Z=E(V),ee=function(){return s.a.createElement("div",null,s.a.createElement("h1",null,"Admin"))},te=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={authUser:null},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.listener=this.props.firebase.auth.onAuthStateChanged(function(t){t?e.setState({authUser:t}):e.setState({authUser:null})})}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){return s.a.createElement(d.a,null,s.a.createElement("div",null,s.a.createElement(M,{authUser:this.state.authUser}),s.a.createElement("hr",null),s.a.createElement(p.a,{exact:!0,path:g,component:U}),s.a.createElement(p.a,{path:"/signup",component:W}),s.a.createElement(p.a,{path:"/signin",component:q}),s.a.createElement(p.a,{path:"/pw-forget",component:z}),s.a.createElement(p.a,{path:f,component:G}),s.a.createElement(p.a,{path:"/account",component:Q}),s.a.createElement(p.a,{path:"/users",component:Z}),s.a.createElement(p.a,{path:"/admin",component:ee})))}}]),t}(n.Component),ae=E(te);o.a.render(s.a.createElement(O.Provider,{value:new C},s.a.createElement(ae,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},67:function(e,t,a){e.exports=a(131)},72:function(e,t,a){},73:function(e,t,a){}},[[67,1,2]]]);
//# sourceMappingURL=main.ce7f87f0.chunk.js.map